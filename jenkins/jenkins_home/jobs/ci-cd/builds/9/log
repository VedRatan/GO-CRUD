Started by user [8mha:////4EKjWYChZS3UlzscKohPBBP47yCDZsEdlqdwT2YsBdy9AAAAlx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzOEgZu/dLi1CL9xJTczDwAawhpaMAAAAA=[0mVed Ratan
[8mha:////4NHql/Mc1FoIn7RCkrrzU7a8LlHoJY2vj2zxjHbkkMnaAAAAoh+LCAAAAAAAAP9tjTEOwjAQBM8BClpKHuFItIiK1krDC0x8GCfWnbEdkooX8TX+gCESFVvtrLSa5wtWKcKBo5UdUu8otU4GP9jS5Mixv3geZcdn2TIl9igbHBs2eJyx4YwwR1SwULBGaj0nRzbDRnX6rmuvydanHMu2V1A5c4MHCFXMWcf8hSnC9jqYxPTz/BXAFEIGsfuclm8zQVqFvQAAAA==[0m[Pipeline] Start of Pipeline
[8mha:////4JAJ27Qs6oE+hF4VoJ2dtln2RBN8EvsdLI27pjfSgUoHAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycohUghExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jduZBmjwAAAAA==[0m[Pipeline] node
Running on [8mha:////4FRMABfaebQgCG1Ua9HCcJ4F49xidp47KGwMZ2hVY9c6AAAAqB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAz2EgYZ/dzEvMT0VP3k/NyC0pLUIn2NpNLMnBLdzDxNfQB9z6/O0QAAAA==[0mJenkins in /var/jenkins_home/workspace/ci-cd
[8mha:////4Eso2dKOEF+r9+D/1L9YwEynZOeq9ymdcwLwwEqUhRujAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gA0xsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfoP95RwAAAAA==[0m[Pipeline] {
[8mha:////4NlOkey5vTLIRm/bVGtDTu3tZeNb/AeXfKcBl5E60OzBAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gQkxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jc09154wAAAAA==[0m[Pipeline] stage
[8mha:////4Ha8juzlwghZGBYk2pUATqxC7Foh3S0+4wFkjJs5PeSKAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0ggUxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jek7ggRwAAAAA==[0m[Pipeline] { (Redeploy app service)
[8mha:////4GgNaCYKMUp3RLMNvFTQbigunrOGG5TiX2ZRwG3Ybi+3AAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbaWGsbAmNJ0AWEZb8zwLrbuWJvJp3kLiJlZNMMm+a93rDOic4UbLcG+wdZu14DKOti0+U+lugiXu6ck2YKRguzSSpM+cFJRUDS1gDKwEbgzpQdmgLbIVXD9UGhba9lFS/o4DGdQM8gYlqLiqVL8wJdvexy4Q/z18BzLEA29ce4gfg7KmOvAAAAA==[0m[Pipeline] sh
+ ls
Dockerfile
allconf
controllers
docker-compose.yaml
go.mod
go.sum
grafana
jenkins
main.go
models
prometheus
routers
[8mha:////4IXh2QNaTa4+UnwNj5QgG0Sffj7gOisBFQhPHXRyw4nUAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbGRNjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI4F2L72ED8v8DEJvAAAAA==[0m[Pipeline] sh
+ docker ps
CONTAINER ID   IMAGE                              COMMAND                  CREATED          STATUS                    PORTS                               NAMES
a75e79ec55ef   flipr-assignment-app               "./main"                 30 minutes ago   Up 30 minutes (healthy)   0.0.0.0:5000->5000/tcp              api_container
8f10cb009d68   nginx:1.17.10                      "nginx -g 'daemon ofâ€¦"   42 minutes ago   Up 42 minutes             0.0.0.0:80->80/tcp                  reverse_proxy
1ac9496ba7ab   gcr.io/cadvisor/cadvisor:v0.37.0   "/usr/bin/cadvisor -â€¦"   42 minutes ago   Up 42 minutes (healthy)   0.0.0.0:8080->8080/tcp              cadvisor
71aade9ba25c   prom/node-exporter:v1.2.2          "/bin/node_exporter â€¦"   42 minutes ago   Up 42 minutes                                                 node-exporter
30b422eb7904   flipr-assignment-jenkins           "/usr/bin/tini -- /uâ€¦"   42 minutes ago   Up 42 minutes             50000/tcp, 0.0.0.0:8000->8080/tcp   flipr-assignment-jenkins-1
3d2cae87f3eb   prom/prometheus:v2.33.1            "/bin/prometheus --câ€¦"   42 minutes ago   Up 42 minutes             0.0.0.0:9090->9090/tcp              prometheus
d274acfba0fd   mongo                              "docker-entrypoint.sâ€¦"   42 minutes ago   Up 42 minutes             27017/tcp                           mongo_db
ef744b54febd   redis:latest                       "docker-entrypoint.sâ€¦"   42 minutes ago   Up 42 minutes             0.0.0.0:6379->6379/tcp              redis
[8mha:////4KF/m5K2b2ncshsMF/mdY0pfxZnCMgg3pF3n0zPXFE+8AAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbmRhjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI4F2L72ED9uwSoQvAAAAA==[0m[Pipeline] sh
+ docker compose ps
NAME                IMAGE               COMMAND             SERVICE             CREATED             STATUS              PORTS
[8mha:////4C1y7X6qPNNEN0RyMOi0koGrqiBw3nIOqmGEG/n0V1mtAAAAox+LCAAAAAAAAP9tjTESgjAQRT84FraWHiJoY+NY2WZoPEGEGAOZXUwWofJEXs07yMiMlb/67zXv9cYyRRw5OtVYaj2lyqsu9G56auDYXgMPquGLqpgSB6tKO5Rc29OMJYvFvCzHQmNlqQqcPDnBWjfmYYpgyBVniZM7aOS+vuOJTE9lMVG+MEZsbn2dmH6dvwGMnSDbC/LdtvsAfEnCxL0AAAA=[0m[Pipeline] sh
+ docker-compose up -d --force-recreate --no-deps app
Building app
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 137B 0.0s done
#1 DONE 0.1s

#2 [internal] load .dockerignore
#2 transferring context: 50B done
#2 DONE 0.1s

#3 [internal] load metadata for docker.io/library/golang:1.19-alpine
#3 DONE 3.2s

#4 [1/4] FROM docker.io/library/golang:1.19-alpine@sha256:9668643a2e62d8bd298ef3663a96de4a70ceb2865b9b7cadd1d5e08387745103
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 1.05MB 0.1s done
#5 DONE 0.2s

#6 [2/4] WORKDIR /app
#6 CACHED

#7 [3/4] COPY . .
#7 CACHED

#8 [4/4] RUN go build main.go
#8 CACHED

#9 exporting to image
#9 exporting layers done
#9 writing image sha256:2710388cb6a8b56e3f635f0ed6d3858cb4177470ae3cb9abba1f5cc961517e6d 0.0s done
#9 naming to docker.io/library/ci-cd_app
#9 naming to docker.io/library/ci-cd_app done
#9 DONE 0.0s
Image for service app was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
Recreating ci-cd-app-1 ... 
Host is already in use by another container
Recreating ci-cd-app-1 ... error

ERROR: for ci-cd-app-1  Cannot start service app: driver failed programming external connectivity on endpoint ci-cd_app_1 (b8941cb5ad179097eb3266964caad4b5e951a2437681b42d596d5940e149187b): Bind for 0.0.0.0:5000 failed: port is already allocated

ERROR: for app  Cannot start service app: driver failed programming external connectivity on endpoint ci-cd_app_1 (b8941cb5ad179097eb3266964caad4b5e951a2437681b42d596d5940e149187b): Bind for 0.0.0.0:5000 failed: port is already allocated
Encountered errors while bringing up the project.
[8mha:////4NN65JnjFZO+fIhGfSXyjK/ipmSvi7G7VRE28ypWmCYUAAAAox+LCAAAAAAAAP9tjTESgjAQRT84FraWHiIMjY1jZZuh8QQRYgxkdjFZhMoTeTXvICMzVv7qv9e81xvrFHHk6FRrqfOUaq/6MLj5qZFjdw08qpYvqmZKHKyq7FhxY08LViwWy7IcK42NpTpw8uQEW92ahymCIVecJc7uoJH75o4nMj2XxUT5whSxuw1NYvp1/gYw9b0gL0tBtv8AGWMrAb0AAAA=[0m[Pipeline] }
[8mha:////4IM0WzkbiV8FAtpGcRPjOkkIOcivlbwr7NP8ZlXnmS57AAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRSFSIitZKwwtMYowT6y7YF5KKF/E1/kBEJCq22plmXm8sU8SRo1ONpdZTqrzqQu+mpwaO7TXwoBq+qIopcbCqtEPJtT3NWLJYzMtyLDRWlqrAyZMTrHVjHqYIhlxxlji5g0bu6zueyPRUFhPlC2PE5tbXienX+RvA2HWCfLsTZPsPc0iC370AAAA=[0m[Pipeline] // stage
[8mha:////4HkyQy1fzv64Ihw5BKUP2o1FeagLEUOOVYHAzVZFUQVwAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRgg5R0VppeIFJjHFi3QX7QlLxIr7GH4iIRMVWO9PM641lijhydKqx1HpKlVdd6N301MCxvQYeVMMXVTElDlaVdii5tqcZSxaLeVmOhcbKUhU4eXKCtW7MwxTBkCvOEid30Mh9fccTmZ7KYqJ8YYzY3Po6Mf06fwMYu06Qb3eCbP8BVVHllb0AAAA=[0m[Pipeline] }
[8mha:////4EIbivz0RbZXFAbzhpBvHZnhqH/b1gGutv7++jgxShZoAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRgg5R0VppeIFJjHFi3QX7QlLxIr7GH4iIRMVWO9PM641lijhydKqx1HpKlVdd6N301MCxvQYeVMMXVTElDlaVdii5tqcZSxaLeVmOhcbKUhU4eXKCtW7MwxTBkCvOEid30Mh9fccTmZ7KYqJ8YYzY3Po6Mf06fwMYu06Qb/eCbPcB5hihub0AAAA=[0m[Pipeline] // node
[8mha:////4FpspSwYdrl14AwYwXqzrwU/YQ+50vsHS8wuPtmdKyB/AAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRSFSIitZKwwtMYowT6y7YF5KKF/E1/kBEJCq22plmXm8sU8SRo1ONpdZTqrzqQu+mpwaO7TXwoBq+qIopcbCqtEPJtT3NWLJYzMtyLDRWlqrAyZMTrHVjHqYIhlxxlji5g0bu6zueyPRUFhPlC2PE5tbXienX+RvA2HWCfLsXZLsPwAHG870AAAA=[0m[Pipeline] End of Pipeline
ERROR: script returned exit code 1
Finished: FAILURE
